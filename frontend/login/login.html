<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X_UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300,400;500;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="../img/Eco-logo.ico" type="image/x-icon">

    <title>Inicio de Sesión</title>
</head>
<body>
    <a href="../menu/index.html" class="boton_regresar">⬅ Regresar al menú</a>
    <div class="container-form register hide">
        <div class="information">
            <div class="info_childs">
                <img src="../img/logo-ecolima.png" alt="Logo Ecolima" class="logo-login">
                <h2>¡Bienvenidos Nuevamente!</h2>
                <p>¿Ya te registraste?</p>
               
                <input type="button" value="Iniciar Sesión" id="sign-in">
            </div>
        </div>
        <div class="form-information">
            <div class="form-information-childs">
                <h2>Crear una Cuenta</h2>
                <p>Ingresa tus datos para registrarte</p>
                <form id="loginForm" class="form form-register" novalidate>
                    <div>
                        <label>
                            <i class='bx bx-user'></i>
                            <input type="text" placeholder="Nombre Usuario" name="userName" id="userName">
                        </label>
                        <span class="error-message" id="userNameError">Debe tener entre 4 y 16 caracteres.</span>
                    </div>
                    <div>
                        <label>
                            <i class='bx bx-envelope'></i>
                            <input type="email" placeholder="Correo Electronico" name="userEmail" id="userEmail">
                        </label>
                        <span class="error-message" id="userEmailError">Correo no válido.</span>
                    </div>
                    <div>
                        <div class="password-wrapper">
                            <i class='bx bx-lock-alt'></i>
                            <input type="password" placeholder="Contraseña" name="userPassword" id="userPass">
                            <i class='bx bx-show toggle-password' id="togglePassword"></i>
                        </div>
                        <span class="error-message" id="userPassError">La contraseña debe tener entre 4 y 12 caracteres.</span>
                    </div>
                    <input type="submit" value="Registrarse">
                    <div class="alerta-error" style="display: none;"></div>
                    <div class="alerta-exito" style="display: none;"></div>
                </form>
                <div class="politica-container">
            <a href="../login/politicas.html" class="btn-politica">
                Políticas y Privacidad
            </a>
            </div>
            </div>
        </div>
    </div>
    
    <div class="container-form login">
        <div class="information">
            <div class="info_childs">
                <img src="../img/logo-ecolima.png" alt="Logo Ecolima" class="logo-login">
                <h2>¡¡Bienvenidos!!</h2>
                <p>¿Todavía no tienes cuenta?</p>
               
                <input type="button" value="Registrarse" id="sign-up">
            </div>
        </div>
        <div class="form-information">
            <div class="form-information-childs">
                <h2>Iniciar Sesión</h2>
                <p>Inicia Sesión con tu cuenta</p>
                <form class="form form-login" novalidate>
                    <div>
                        <label >
                            <i class='bx bx-envelope' ></i>
                            <input type="email" placeholder="Correo Electronico" name="userEmail">
                        </label>
                    </div>
                   <div class="form-group">
                        <div class="password-wrapper">
                            <i class='bx bx-lock-alt'></i>
                            <input type="password" placeholder="Contraseña" name="userPassword" id="loginPasswordInput">
                            <i class='bx bx-show toggle-password' id="toggleLoginPassword"></i>
                        </div>
                    </div>
                    <div>
                        <a href="../login/Olvidé_contraseña.html" class="forgot-password">¿Olvidaste tu contraseña?</a>
                    </div>
                    <input type="submit" value="Iniciar Sesión">
                    <div class="alerta-error" style="display: none;"></div>
                    <div class="alerta-exito" style="display: none;"></div>
                </form> 
                <div id="loader" class="hide">Iniciando sesión...</div>
        </div>
    </div>
    <script>
  document.getElementById("loginForm").addEventListener("submit", function (e) {
    e.preventDefault();
    let valid = true;

    const userName = document.getElementById("userName");
    const userNameError = document.getElementById("userNameError");

    if (!userName || userName.value.length < 4 || userName.value.length > 16) {
      userNameError.classList.add("error-visible");
      valid = false;
    } else {
      userNameError.classList.remove("error-visible");
    }

    const email = document.getElementById("userEmail");
    const emailError = document.getElementById("userEmailError");
    const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;

    if (!email || !emailPattern.test(email.value)) {
      emailError.classList.add("error-visible");
      valid = false;
    } else {
      emailError.classList.remove("error-visible");
    }

    const password = document.getElementById("userPass");
    const passwordError = document.getElementById("userPassError");

    if (!password || password.value.length < 4 || password.value.length > 12) {
      passwordError.classList.add("error-visible");
      valid = false;
    } else {
      passwordError.classList.remove("error-visible");
    }

    if (valid) {
      this.submit(); // Solo si todo está bien
    }
  });
</script>

    <script src="js/script.js"></script>
    <script src="js/register.js" type="module"></script>
    <script src="js/login_modulo.js" type="module"></script>
    <script src="js/script2.js"></script>
</body>
</html>